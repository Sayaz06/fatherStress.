<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Original Wan-Law</title>
  <meta name="theme-color" content="#020617" />
  <link rel="manifest" href="manifest.webmanifest" />

  <!-- Premium theme styles -->
  <style>
    :root{
      --bg:#020617;         /* Slate/Navy gelap */
      --text:#e5e7eb;       /* Gray-100 terang */
      --muted:#9ca3af;      /* Subtext */
      --border:#1f2937;     /* Cool Gray */
      --border2:#4b5563;    /* Slate */
      --grad1:#6366f1;      /* Indigo */
      --grad2:#8b5cf6;      /* Violet */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Arial, sans-serif;
    }
    a{color:inherit; text-decoration:none}
    .container{max-width:900px; margin:0 auto; padding:20px}
    .title{
      font-weight:700; font-size:24px; margin:8px 0 16px;
    }
    .card{
      background:#0b1220; border:1px solid var(--border);
      border-radius:16px; padding:16px; box-shadow:0 10px 25px rgba(0,0,0,.35);
    }
    .row{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 14px; border-radius:12px; color:white; border:1px solid transparent;
      background:linear-gradient(135deg, var(--grad1), var(--grad2));
      box-shadow:0 8px 30px rgba(99,102,241,.35);
      cursor:pointer; transition:.15s transform ease;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn-ghost{
      background:transparent; border:1px solid var(--border2); color:var(--text)
    }
    .btn-danger{
      background:#7c2d12; border-color:#7c2d12;
    }
    .input{
      width:100%; padding:10px 12px; border-radius:12px;
      background:#0b1220; border:1px solid var(--border2);
      color:var(--text); outline:none;
    }
    .input::placeholder{color:var(--muted)}
    .list{display:flex; flex-direction:column; gap:10px; margin-top:12px}
    .item{
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; border-radius:12px; border:1px solid var(--border);
      background:#0e1626;
    }
    .item-name{
      display:flex; gap:10px; align-items:center; flex:1; min-width:0;
    }
    .item-name input{
      flex:1; min-width:0;
      background:transparent; border:none; color:var(--text); outline:none;
    }
    .toolbar{
      display:flex; gap:8px; flex-wrap:wrap; padding:8px; border:1px solid var(--border);
      border-radius:12px; margin:10px 0; background:#0e1626;
    }
    .toolbar .btn{padding:8px 10px}
    .editor{
      min-height:240px; padding:12px; border-radius:12px;
      border:1px solid var(--border); background:#0b1220; outline:none;
    }
    .subtext{color:var(--muted); font-size:12px}
    .header{
      display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px;
    }
    .search{flex:1}
    .hidden{display:none !important}
    .divider{border-top:1px solid var(--border); margin:12px 0}
    .back{cursor:pointer}
    /* Font size chooser (1pt–60pt) */
    .size-input{
      width:90px; background:#0b1220; border:1px solid var(--border2);
      border-radius:10px; color:var(--text); padding:8px;
    }
  </style>

  <!-- Firebase SDKs (Compat for simplicity) -->
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <!-- App main script -->
  <script defer src="app.js"></script>
</head>
<body>
  <div class="container">
    <!-- View: Login -->
    <section id="view-login" class="card">
      <div class="title">Original Wan-Law</div>
      <p class="subtext">Log masuk dengan akaun Gmail untuk menyimpan cerita & skrip anda secara selamat.</p>
      <div class="divider"></div>
      <div class="row">
        <button id="btn-google" class="btn">Log masuk dengan Google</button>
      </div>
    </section>

    <!-- View: Home -->
    <section id="view-home" class="card hidden">
      <div class="header">
        <div class="title">Original Wan-Law</div>
        <div class="row">
          <button id="btn-logout" class="btn-ghost">Logout</button>
        </div>
      </div>

      <div class="row">
        <input id="search-files" class="input search" placeholder="Cari Fail…" />
        <button id="btn-add-file" class="btn">Tambah Fail</button>
      </div>

      <div id="files-list" class="list"></div>
    </section>

    <!-- View: Subfolder -->
    <section id="view-folders" class="card hidden">
      <div class="header">
        <div class="row">
          <span id="btn-back-home" class="btn-ghost back">← Kembali</span>
        </div>
        <div class="title">Original Wan-Law</div>
      </div>

      <p class="subtext" id="current-file-name"></p>

      <div class="row">
        <input id="search-folders" class="input search" placeholder="Cari Folder (longgar: 1–2 huruf/nombor)…" />
        <button id="btn-add-folder" class="btn">Tambah subfolderFolder Baharu</button>
      </div>

      <div id="folders-list" class="list"></div>
    </section>

    <!-- View: Note -->
    <section id="view-note" class="card hidden">
      <div class="header">
        <div class="row">
          <span id="btn-back-folders" class="btn-ghost back">← Kembali</span>
        </div>
        <div class="title">Original Wan-Law</div>
      </div>

      <p class="subtext" id="current-folder-name"></p>

      <div class="toolbar">
        <button class="btn" data-action="bold">Bold</button>
        <button class="btn" data-action="underline">Underline</button>
        <input id="color-picker" type="color" title="Pilih warna perkataan" />
        <input id="font-size" class="size-input" type="number" min="1" max="60" step="1" value="14" title="Saiz teks (1–60 pt)" />
      </div>

      <div id="editor" class="editor" contenteditable="true" spellcheck="false" placeholder="Tulis nota anda di sini…"></div>
      <p class="subtext" id="save-status">Auto-simpan diaktifkan.</p>
    </section>
  </div>

  <!-- Register Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').catch(() => {});
    }
  </script>
</body>
</html>
